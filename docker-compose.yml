
services:
#  robot-arm:

  teleshake:
    build: ./teleshake/
    environment:
      - PORT=50050
      - ADDRESS=teleshake
      - PRIVATE_KEY=/certs/teleshake.key
      - CERT_FILE=/certs/teleshake.crt
    ports:
        - "50050:50050"
    dns:
      - 172.17.0.1
    extra_hosts:
      - "host.docker.internal:host-gateway"
    container_name: server
    networks:
      server_net:
        ipv4_address: 192.168.200.3
    volumes:
      - ./teleshake/certs:/certs


  universal-sila-client:
    image: registry.gitlab.com/sila2/universal-sila-client/sila_universal_client:latest
    ports:
    - "8080:8080"
    - "50051:50051"
    dns:
      - 172.17.0.1
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      server_net:
        ipv4_address: 192.168.200.2

networks:
  server_net:
    driver: bridge
    name: vu-lab
    ipam:
      config:
        - subnet: 192.168.200.0/24
          gateway: 192.168.200.1
